import{j as e,r as c,s as g}from"./app-B1dnFpd4.js";import{u as N,a as w,S as z}from"./swal-CSiFzsL5.js";import{B as m}from"./button-BAVdE00S.js";import{K as p}from"./transition-BgHyFRbX.js";import{I as d}from"./input-BeoEf-fz.js";import{c as k,g as q}from"./raffle-thunk-DXNd-8j-.js";import"./sweetalert2.esm.all-O8mKH-HY.js";import"./index-DSUZj3_Y.js";import"./utils-CDN07tui.js";import"./eye-CjHwKiQ-.js";import"./createLucideIcon-76nHZBEE.js";function _({isOpen:l,onClose:t,title:r,children:i,width:o=""}){return e.jsx(p,{show:l,as:c.Fragment,children:e.jsxs("div",{className:"relative z-50",children:[e.jsx(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95 translate-y-2",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-95 translate-y-2",children:e.jsxs("div",{className:`
                relative w-full ${o} max-h-[90vh] transform rounded-xl p-6
                border dark:border-gray-700 border-gray-200
                bg-white dark:bg-black
                text-gray-900 dark:text-gray-100
                shadow-xl transition-all
              `,children:[e.jsx("button",{onClick:()=>t(!1),className:`
                  absolute top-3 right-6 text-3xl
                  text-red-500 dark:text-red-400
                  hover:text-red-700 dark:hover:text-red-600
                  transition-colors
                `,children:"Ã—"}),r&&e.jsx("h3",{className:"text-lg font-medium leading-6 mb-4 pr-8",children:r}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:i})]})})})]})})}function E({label:l="Message",placeholder:t="Type here...",rows:r=4,error:i,...o}){return e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("label",{htmlFor:"message",className:"mb-2 block text-sm font-medium",children:l}),e.jsx("textarea",{id:"message",rows:r,placeholder:t,...o,className:"block w-full resize-none rounded-lg border border-gray-300 p-2.5 shadow-sm sm:text-sm"}),i&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]})}function K(){const[l,t]=c.useState(!1),{register:r,control:i,handleSubmit:o,watch:S,setError:h,isSubmitting:v,formState:{errors:n}}=N({defaultValues:{name:"",description:"",start_at:"",end_at:"",prizes:[{name:"",quantity:null,description:""}]},mode:"onSubmit"}),{fields:x,append:y,remove:f}=w({control:i,name:"prizes"}),b=async a=>{if(a.start_at&&a.end_at&&a.start_at>a.end_at){h("end_at",{type:"manual",message:"End date must be after start date"});return}const s=a.prizes.filter(u=>u.name?.trim()),j={...a,prizes:s};try{await k(j),await g.dispatch(q()),await z({type:"success",title:"Event created successfully"}),t(!1)}catch(u){console.error("Error creating event:",u)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{className:"px-6 py-2",variant:"success",onClick:()=>t(!0),children:"Create Event"})}),e.jsx(_,{isOpen:l,onClose:()=>t(!1),title:"Create Event",width:"max-w-3xl",children:e.jsx("form",{onSubmit:o(b),children:e.jsxs("div",{className:"my-5 space-y-4",children:[e.jsx(d,{label:"Event Name",placeholder:"Event Name",...r("name",{required:"Event name is required"}),error:n.name?.message}),e.jsx(E,{label:"Description",placeholder:"Describe the event...",...r("description",{required:"description is required"}),name:"description",error:n.description?.message,rows:3}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{label:"Start Date",type:"date",...r("start_at",{required:"Start date is required"}),error:n.start_at?.message}),e.jsx(d,{label:"End Date",type:"date",...r("end_at",{required:"End date is required"}),error:n.end_at?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Prizes"}),x.map((a,s)=>e.jsxs("div",{className:"flex flex-col gap-3 space-y-2 rounded border p-3",children:[e.jsx(d,{label:`Prize ${s+1} Name`,placeholder:"Prize Name",...r(`prizes.${s}.name`,{required:"Field is required"}),error:n.prizes?.[s]?.name?.message}),e.jsx(d,{label:"Quantity",type:"number",placeholder:"Quantity",min:1,...r(`prizes.${s}.quantity`,{valueAsNumber:!0,required:"Field is required",min:{value:1,message:"Quantity must be at least 1"}}),error:n.prizes?.[s]?.quantity?.message}),x.length>1&&e.jsx(m,{variant:"danger",size:"sm",className:"w-1/6 py-2",onClick:()=>f(s),children:"Remove Prize"})]},a.id)),e.jsx("div",{className:"my-4 flex justify-end",children:e.jsx(m,{variant:"success",className:"py-2",size:"sm",onClick:()=>y({name:"",quantity:null,description:""}),children:"+ Add Prize"})})]}),e.jsx("div",{className:"flex justify-end gap-3 border-t pt-4",children:e.jsx(m,{loading:v,variant:"primary",type:"submit",children:"Save Event"})})]})})})]})}export{K as default};
