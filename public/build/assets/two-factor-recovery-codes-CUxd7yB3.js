import{j as e,r as n,F as f}from"./app-CjJEGrvZ.js";import{b as p}from"./index-Buhnpvkw.js";import{a as y,B as u}from"./button-BswbZZ4-.js";import{c}from"./utils-CDN07tui.js";import{c as l}from"./createLucideIcon-DPpkO4uy.js";import{c as v,C as j,a as b,d as w,b as N}from"./card-BDTBGP7q.js";import{E as k,a as C}from"./eye-BWynteon.js";const _=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],A=l("CircleAlert",_);const R=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],S=l("LockKeyhole",R);const E=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],V=l("RefreshCw",E),F=y("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function M({className:t,variant:r,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:c(F({variant:r}),t),...a})}function T({className:t,...r}){return e.jsx("div",{"data-slot":"alert-title",className:c("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function z({className:t,...r}){return e.jsx("div",{"data-slot":"alert-description",className:c("col-start-2 grid justify-items-start gap-1 text-sm text-muted-foreground [&_p]:leading-relaxed",t),...r})}function I({errors:t,title:r}){return e.jsxs(M,{variant:"destructive",children:[e.jsx(A,{}),e.jsx(T,{children:r||"Something went wrong."}),e.jsx(z,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Array.from(new Set(t)).map((a,s)=>e.jsx("li",{children:a},s))})})]})}function q({recoveryCodesList:t,fetchRecoveryCodes:r,errors:a}){const[s,m]=n.useState(!1),d=n.useRef(null),x=t.length>0&&s,g=n.useCallback(async()=>{!s&&!t.length&&await r(),m(!s),s||setTimeout(()=>{d.current?.scrollIntoView({behavior:"smooth",block:"nearest"})})},[s,t.length,r]);n.useEffect(()=>{t.length||r()},[t.length,r]);const h=s?k:C;return e.jsxs(v,{children:[e.jsxs(j,{children:[e.jsxs(b,{className:"flex gap-3",children:[e.jsx(S,{className:"size-4","aria-hidden":"true"}),"2FA Recovery Codes"]}),e.jsx(w,{children:"Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager."})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(u,{onClick:g,className:"w-fit","aria-expanded":s,"aria-controls":"recovery-codes-section",children:[e.jsx(h,{className:"size-4","aria-hidden":"true"}),s?"Hide":"View"," Recovery Codes"]}),x&&e.jsx(f,{...p.form(),options:{preserveScroll:!0},onSuccess:r,children:({processing:i})=>e.jsxs(u,{variant:"secondary",type:"submit",disabled:i,"aria-describedby":"regenerate-warning",children:[e.jsx(V,{})," Regenerate Codes"]})})]}),e.jsx("div",{id:"recovery-codes-section",className:`relative overflow-hidden transition-all duration-300 ${s?"h-auto opacity-100":"h-0 opacity-0"}`,"aria-hidden":!s,children:e.jsx("div",{className:"mt-3 space-y-3",children:a?.length?e.jsx(I,{errors:a}):e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:d,className:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm",role:"list","aria-label":"Recovery codes",children:t.length?t.map((i,o)=>e.jsx("div",{role:"listitem",className:"select-text",children:i},o)):e.jsx("div",{className:"space-y-2","aria-label":"Loading recovery codes",children:Array.from({length:8},(i,o)=>e.jsx("div",{className:"h-4 animate-pulse rounded bg-muted-foreground/20","aria-hidden":"true"},o))})}),e.jsx("div",{className:"text-xs text-muted-foreground select-none",children:e.jsxs("p",{id:"regenerate-warning",children:["Each recovery code can be used once to access your account and will be removed after use. If you need more, click"," ",e.jsx("span",{className:"font-bold",children:"Regenerate Codes"})," ","above."]})})]})})})]})]})}const G=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{I as A,q as T,G as t};
