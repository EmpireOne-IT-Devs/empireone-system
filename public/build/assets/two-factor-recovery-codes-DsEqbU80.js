import{j as e,r as i,F as p}from"./app-CvaAx_e9.js";import{r as v}from"./index-PDQwXLuD.js";import{c as y}from"./index-TKCIFEXd.js";import{c as l}from"./utils-DL16pZsE.js";import{c as d}from"./createLucideIcon-BYvixOmi.js";import{c as n,B as m}from"./button-BEgLEFid.js";import{E as j,a as b}from"./eye-BOnUrSef.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],w=d("CircleAlert",N);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],_=d("LockKeyhole",k);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],A=d("RefreshCw",C);function R({className:t,...r}){return e.jsx("div",{"data-slot":"card",className:n("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function S({className:t,...r}){return e.jsx("div",{"data-slot":"card-header",className:n("flex flex-col gap-1.5 px-6",t),...r})}function E({className:t,...r}){return e.jsx("div",{"data-slot":"card-title",className:n("leading-none font-semibold",t),...r})}function V({className:t,...r}){return e.jsx("div",{"data-slot":"card-description",className:n("text-muted-foreground text-sm",t),...r})}function F({className:t,...r}){return e.jsx("div",{"data-slot":"card-content",className:n("px-6",t),...r})}const M=y("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function T({className:t,variant:r,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:l(M({variant:r}),t),...s})}function z({className:t,...r}){return e.jsx("div",{"data-slot":"alert-title",className:l("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function I({className:t,...r}){return e.jsx("div",{"data-slot":"alert-description",className:l("col-start-2 grid justify-items-start gap-1 text-sm text-muted-foreground [&_p]:leading-relaxed",t),...r})}function $({errors:t,title:r}){return e.jsxs(T,{variant:"destructive",children:[e.jsx(w,{}),e.jsx(z,{children:r||"Something went wrong."}),e.jsx(I,{children:e.jsx("ul",{className:"list-inside list-disc text-sm",children:Array.from(new Set(t)).map((s,a)=>e.jsx("li",{children:s},a))})})]})}function q({recoveryCodesList:t,fetchRecoveryCodes:r,errors:s}){const[a,x]=i.useState(!1),u=i.useRef(null),f=t.length>0&&a,g=i.useCallback(async()=>{!a&&!t.length&&await r(),x(!a),a||setTimeout(()=>{u.current?.scrollIntoView({behavior:"smooth",block:"nearest"})})},[a,t.length,r]);i.useEffect(()=>{t.length||r()},[t.length,r]);const h=a?j:b;return e.jsxs(R,{children:[e.jsxs(S,{children:[e.jsxs(E,{className:"flex gap-3",children:[e.jsx(_,{className:"size-4","aria-hidden":"true"}),"2FA Recovery Codes"]}),e.jsx(V,{children:"Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager."})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(m,{onClick:g,className:"w-fit","aria-expanded":a,"aria-controls":"recovery-codes-section",children:[e.jsx(h,{className:"size-4","aria-hidden":"true"}),a?"Hide":"View"," Recovery Codes"]}),f&&e.jsx(p,{...v.form(),options:{preserveScroll:!0},onSuccess:r,children:({processing:o})=>e.jsxs(m,{variant:"secondary",type:"submit",disabled:o,"aria-describedby":"regenerate-warning",children:[e.jsx(A,{})," Regenerate Codes"]})})]}),e.jsx("div",{id:"recovery-codes-section",className:`relative overflow-hidden transition-all duration-300 ${a?"h-auto opacity-100":"h-0 opacity-0"}`,"aria-hidden":!a,children:e.jsx("div",{className:"mt-3 space-y-3",children:s?.length?e.jsx($,{errors:s}):e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:u,className:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm",role:"list","aria-label":"Recovery codes",children:t.length?t.map((o,c)=>e.jsx("div",{role:"listitem",className:"select-text",children:o},c)):e.jsx("div",{className:"space-y-2","aria-label":"Loading recovery codes",children:Array.from({length:8},(o,c)=>e.jsx("div",{className:"h-4 animate-pulse rounded bg-muted-foreground/20","aria-hidden":"true"},c))})}),e.jsx("div",{className:"text-xs text-muted-foreground select-none",children:e.jsxs("p",{id:"regenerate-warning",children:["Each recovery code can be used once to access your account and will be removed after use. If you need more, click"," ",e.jsx("span",{className:"font-bold",children:"Regenerate Codes"})," ","above."]})})]})})})]})]})}const J=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{$ as A,q as T,J as t};
